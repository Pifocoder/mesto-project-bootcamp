(()=>{"use strict";var e=document.querySelector(".popup-profile__form"),t=e.querySelector('[name="profile-name"]'),n=e.querySelector('[name="profile-bio"]'),o=document.querySelector(".popup-profile"),r=document.querySelector(".profile__name"),c=document.querySelector(".profile__bio"),a=document.querySelectorAll(".popup__close"),u=document.querySelector(".popup-add-card__form"),l=u.querySelector('[name="card-name"]'),i=u.querySelector('[name="card-link"]'),d=document.querySelector(".popup-add-card"),p=document.querySelectorAll(".popup");function s(e){e.classList.add("popup_opened"),document.addEventListener("keydown",f)}function m(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",f)}function y(){t.value=r.textContent,n.value=c.textContent}function f(e){"Escape"===e.key&&m(document.querySelector(".popup_opened"))}var v=document.querySelector(".popup-card"),_=v.querySelector(".popup-card__photo"),S=v.querySelector(".popup-card__name"),q=document.querySelector(".gallery"),k=document.querySelector("#gallery__card").content;function b(e,t){var n=function(e,t){var n=k.querySelector(".gallery__card").cloneNode(!0);n.querySelector(".gallery__name").textContent=e;var o=n.querySelector(".gallery__photo");o.src=t,o.alt=e,n.querySelector(".gallery__delete-card").addEventListener("click",(function(){n.remove()}));var r=n.querySelector(".gallery__icon");return r.addEventListener("click",(function(){r.classList.toggle("gallery__icon_active")})),n.querySelector(".gallery__photo-area").addEventListener("click",(function(){!function(e,t){s(v),_.src=t,_.alt=e,S.textContent=e}(e,t)})),n}(e,t);q.prepend(n)}var g,E=function(e,t,n){e.some((function(e){return!e.validity.valid}))?(t.classList.add(n),t.setAttribute("disabled","disabled")):(t.classList.remove(n),t.removeAttribute("disabled","disabled"))},L=document.querySelector(".popup-profile"),h=document.querySelector(".profile__edit-button"),C=document.querySelector(".profile__add-button"),x=document.querySelector(".popup-add-card");!function(e){for(var t=e.length-1;t>=0;--t)b(e[t].name,e[t].link)}([{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}]),a.forEach((function(e){var t=e.closest(".popup");e.addEventListener("click",(function(){return m(t)}))})),y(),h.addEventListener("click",(function(){y(),s(L)})),e.addEventListener("submit",(function(e){e.preventDefault(),r.textContent=t.value,c.textContent=n.value,m(o)})),u.addEventListener("submit",(function(e){e.preventDefault(),b(l.value,i.value),e.target.reset(),m(d)})),C.addEventListener("click",(function(){s(x)})),g={formSelector:".popup__form",inputSelector:".popup__item",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__item_type_error",errorClass:"popup__error_visible"},document.querySelectorAll(g.formSelector).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault(),E(t,n,g.inactiveButtonClass)}));var t=Array.from(e.querySelectorAll(g.inputSelector)),n=e.querySelector(g.submitButtonSelector);E(t,n,g.inactiveButtonClass),t.forEach((function(o){o.addEventListener("input",(function(r){!function(e,t,n,o){t.validity.valid?function(e,t,n,o){e.querySelector(".".concat(t.name,"-").concat(n)).textContent="",t.classList.remove(o)}(e,t,n,o):function(e,t,n,o){e.querySelector(".".concat(t.name,"-").concat(n)).textContent=t.validationMessage,t.classList.add(o)}(e,t,n,o)}(e,o,g.inputErrorClass,g.errorClass),E(t,n,g.inactiveButtonClass)}))}))})),p.forEach((function(e){e.querySelector(".popup__container").addEventListener("mousedown",(function(e){e.stopPropagation()})),e.addEventListener("mousedown",(function(t){m(e)}))}))})();